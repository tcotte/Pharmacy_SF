{% extends "default/index.html.twig" %}
{% block content %}
    {% block stylesheets %}
        <link href="{{ asset('css/form.css') }}" rel="stylesheet"/>
        <link href="{{ asset('css/editFormulary-form.css') }}" rel="stylesheet"/>
    {% endblock %}
    <center>
        <div id="container" class="col-md-11">

            <h3 attr-id="{{ category.id }}">Modification du formulaire {{ category.name }}</h3>
            {%
                    form_theme form
                    'bootstrap_4_layout.html.twig'
                        'jquery.collection.html.twig'%}
            {{ form_start(form) }}
            {{ form_end(form)}}

        </div>
    </center>
    <button class="btn btn-danger col-md-1 offset-md-1" id="remove-form">Supprimer</button>
{% include "others/modalDelete.html.twig" %}
    <style>
        #remove-form{
            margin-top:10px;
            margin-bottom:10px;
        }
    </style>
{% endblock %}
{% block javascripts %}
<script src="{{ asset('js/jquery.collection.js') }}"></script>
<script type="text/javascript">

    $('.product-collection').collection({
        up: '<a href="#" class="btn btn-light"><i class="fas fa-long-arrow-alt-up"></i></a>',
        down: '<a href="#" class="btn btn-light"><i class="fas fa-long-arrow-alt-down"></i></a>',
        add: '<a href="#" class="btn btn-primary"><i class="fas fa-plus-circle"></i></a>',
        remove: '<a href="#" class="btn btn-danger"><i class="fas fa-trash-alt"></i></a>',
        // allow_duplicate: true
    });


    $(document).ready(function () {

        $("#remove-form").click(function (e) {
            e.preventDefault();
            theHREF = $(this).attr("href");
            $("#confirmModal").modal("show");
        });

        $("#confirmModalNo").click(function (e) {
            $("#confirmModal").modal("hide");
        });

        $("#confirmModalYes").click(function (e) {
            let categoryId = $('h3').attr('attr-id');
            $.ajax({
                url: Routing.generate('deleteFormulary', { id: categoryId}),
                type: 'GET',
                success: function (data) {
                    $("#confirmModal").modal("hide");
                    window.document.location = Routing.generate('app');
                    // alert(data);
                },
                error: function () {
                    alert('La requÃªte n\'a pas abouti');
                }
            });
        });
    });
</script>{% endblock %}
